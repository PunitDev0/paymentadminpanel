import{n as Ne,T as k,r as K,O as _e,V as Oe,j as e}from"./app-Cue28fQB.js";import{F as Pe,D as Te}from"./filter-BDz9OPH5.js";import{A as ee,a as te}from"./arrow-up-Bk2F4Qjt.js";import{i as Le,D as Fe,f as Re,E as Ee,L as le,a as ae,C as Ce,A as $e,b as J,c as Ie,d as he,h as ze,e as Be,g as Ae,u as Me,G as We,j as fe,k as Ke,X as re,Y as ne,l as Ve,B as ge,R as ce,m as de,T as ue,n as me,o as Ue}from"./BarChart-DRZhM0vC.js";import{c as ye}from"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Ge=Ne("Phone",Ye);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],He=Ne("Zap",qe);var Xe=["type","layout","connectNulls","ref"],Ze=["key"];function H(t){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},H(t)}function ve(t,n){if(t==null)return{};var r=Je(t,n),a,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)a=l[s],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function Je(t,n){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(n.indexOf(a)>=0)continue;r[a]=t[a]}return r}function Q(){return Q=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Q.apply(this,arguments)}function be(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,a)}return r}function O(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?be(Object(r),!0).forEach(function(a){z(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function q(t){return at(t)||tt(t)||et(t)||Qe()}function Qe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function et(t,n){if(t){if(typeof t=="string")return pe(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(t,n)}}function tt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function at(t){if(Array.isArray(t))return pe(t)}function pe(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,a=new Array(n);r<n;r++)a[r]=t[r];return a}function rt(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function je(t,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Se(a.key),a)}}function nt(t,n,r){return n&&je(t.prototype,n),r&&je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function st(t,n,r){return n=se(n),it(t,De()?Reflect.construct(n,r||[],se(t).constructor):n.apply(t,r))}function it(t,n){if(n&&(H(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ot(t)}function ot(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function De(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(De=function(){return!!t})()}function se(t){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},se(t)}function lt(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&xe(t,n)}function xe(t,n){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},xe(t,n)}function z(t,n,r){return n=Se(n),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Se(t){var n=ct(t,"string");return H(n)=="symbol"?n:n+""}function ct(t,n){if(H(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,n);if(H(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var X=function(t){function n(){var r;rt(this,n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=st(this,n,[].concat(s)),z(r,"state",{isAnimationFinished:!0,totalLength:0}),z(r,"generateSimpleStrokeDasharray",function(o,c){return"".concat(c,"px ").concat(o-c,"px")}),z(r,"getStrokeDasharray",function(o,c,d){var x=d.reduce(function(P,T){return P+T});if(!x)return r.generateSimpleStrokeDasharray(c,o);for(var h=Math.floor(o/x),v=o%x,f=c-o,b=[],u=0,y=0;u<d.length;y+=d[u],++u)if(y+d[u]>v){b=[].concat(q(d.slice(0,u)),[v-y]);break}var _=b.length%2===0?[0,f]:[f];return[].concat(q(n.repeat(d,h)),q(b),_).map(function(P){return"".concat(P,"px")}).join(", ")}),z(r,"id",Me("recharts-line-")),z(r,"pathRef",function(o){r.mainCurve=o}),z(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),z(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return lt(n,t),nt(n,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,o=l.points,c=l.xAxis,d=l.yAxis,x=l.layout,h=l.children,v=Re(h,Ee);if(!v)return null;var f=function(y,_){return{x:y.x,y:y.y,value:y.value,errorVal:Ae(y.payload,_)}},b={clipPath:a?"url(#clipPath-".concat(s,")"):null};return k.createElement(le,b,v.map(function(u){return k.cloneElement(u,{key:"bar-".concat(u.props.dataKey),data:o,xAxis:c,yAxis:d,layout:x,dataPointFormatter:f})}))}},{key:"renderDots",value:function(a,s,l){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var c=this.props,d=c.dot,x=c.points,h=c.dataKey,v=ae(this.props,!1),f=ae(d,!0),b=x.map(function(y,_){var P=O(O(O({key:"dot-".concat(_),r:3},v),f),{},{value:y.value,dataKey:h,cx:y.x,cy:y.y,index:_,payload:y.payload});return n.renderDotItem(d,P)}),u={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(l,")"):null};return k.createElement(le,Q({className:"recharts-line-dots",key:"dots"},u),b)}},{key:"renderCurveStatically",value:function(a,s,l,o){var c=this.props,d=c.type,x=c.layout,h=c.connectNulls;c.ref;var v=ve(c,Xe),f=O(O(O({},ae(v,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(l,")"):null,points:a},o),{},{type:d,layout:x,connectNulls:h});return k.createElement(Ce,Q({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var l=this,o=this.props,c=o.points,d=o.strokeDasharray,x=o.isAnimationActive,h=o.animationBegin,v=o.animationDuration,f=o.animationEasing,b=o.animationId,u=o.animateNewValues,y=o.width,_=o.height,P=this.state,T=P.prevPoints,L=P.totalLength;return k.createElement($e,{begin:h,duration:v,isActive:x,easing:f,from:{t:0},to:{t:1},key:"line-".concat(b),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(D){var j=D.t;if(T){var F=T.length/c.length,E=c.map(function(w,U){var W=Math.floor(U*F);if(T[W]){var G=T[W],C=J(G.x,w.x),ie=J(G.y,w.y);return O(O({},w),{},{x:C(j),y:ie(j)})}if(u){var oe=J(y*2,w.x),Z=J(_/2,w.y);return O(O({},w),{},{x:oe(j),y:Z(j)})}return O(O({},w),{},{x:w.x,y:w.y})});return l.renderCurveStatically(E,a,s)}var B=J(0,L),M=B(j),V;if(d){var Y="".concat(d).split(/[,\s]+/gim).map(function(w){return parseFloat(w)});V=l.getStrokeDasharray(M,L,Y)}else V=l.generateSimpleStrokeDasharray(L,M);return l.renderCurveStatically(c,a,s,{strokeDasharray:V})})}},{key:"renderCurve",value:function(a,s){var l=this.props,o=l.points,c=l.isAnimationActive,d=this.state,x=d.prevPoints,h=d.totalLength;return c&&o&&o.length&&(!x&&h>0||!Ie(x,o))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(o,a,s)}},{key:"render",value:function(){var a,s=this.props,l=s.hide,o=s.dot,c=s.points,d=s.className,x=s.xAxis,h=s.yAxis,v=s.top,f=s.left,b=s.width,u=s.height,y=s.isAnimationActive,_=s.id;if(l||!c||!c.length)return null;var P=this.state.isAnimationFinished,T=c.length===1,L=ye("recharts-line",d),D=x&&x.allowDataOverflow,j=h&&h.allowDataOverflow,F=D||j,E=he(_)?this.id:_,B=(a=ae(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},M=B.r,V=M===void 0?3:M,Y=B.strokeWidth,w=Y===void 0?2:Y,U=ze(o)?o:{},W=U.clipDot,G=W===void 0?!0:W,C=V*2+w;return k.createElement(le,{className:L},D||j?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(E)},k.createElement("rect",{x:D?f:f-b/2,y:j?v:v-u/2,width:D?b:b*2,height:j?u:u*2})),!G&&k.createElement("clipPath",{id:"clipPath-dots-".concat(E)},k.createElement("rect",{x:f-C/2,y:v-C/2,width:b+C,height:u+C}))):null,!T&&this.renderCurve(F,E),this.renderErrorBar(F,E),(T||o)&&this.renderDots(F,G,E),(!y||P)&&Be.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var l=a.length%2!==0?[].concat(q(a),[0]):a,o=[],c=0;c<s;++c)o=[].concat(q(o),q(l));return o}},{key:"renderDotItem",value:function(a,s){var l;if(k.isValidElement(a))l=k.cloneElement(a,s);else if(Le(a))l=a(s);else{var o=s.key,c=ve(s,Ze),d=ye("recharts-line-dot",typeof a!="boolean"?a.className:"");l=k.createElement(Fe,Q({key:o},c,{className:d}))}return l}}])}(K.PureComponent);z(X,"displayName","Line");z(X,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!We.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});z(X,"getComposedData",function(t){var n=t.props,r=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,o=t.dataKey,c=t.bandSize,d=t.displayedData,x=t.offset,h=n.layout,v=d.map(function(f,b){var u=Ae(f,o);return h==="horizontal"?{x:fe({axis:r,ticks:s,bandSize:c,entry:f,index:b}),y:he(u)?null:a.scale(u),value:u,payload:f}:{x:he(u)?null:r.scale(u),y:fe({axis:a,ticks:l,bandSize:c,entry:f,index:b}),value:u,payload:f}});return O({points:v,layout:h},x)});var we=Ke({chartName:"LineChart",GraphicalChild:X,axisComponents:[{axisType:"xAxis",AxisComp:re},{axisType:"yAxis",AxisComp:ne}],formatAxisMap:Ve});const xt=()=>{const[t,n]=K.useState([]),[r,a]=K.useState([]),[s,l]=K.useState([]),[o,c]=K.useState("Daily"),[d,x]=K.useState(""),[h,v]=K.useState(""),[f,b]=K.useState(!1);K.useEffect(()=>{u()},[]);const u=async()=>{b(!0);try{const i=await _e();n(i.data.data);const m=(await Oe()).data.data.map(p=>({...p,created_at:new Date(p.created_at)}));a(m),y(m,o,d,h)}catch(i){console.error("Error fetching data:",i)}finally{b(!1)}},y=(i,g,m,p)=>{let N=[...i];const $=new Date;if(m&&p){const R=new Date(m),I=new Date(p);I.setHours(23,59,59,999),N=N.filter(S=>{const A=new Date(S.created_at);return A>=R&&A<=I})}else switch(g){case"Daily":N=N.filter(S=>{const A=new Date(S.created_at);return A.getDate()===$.getDate()&&A.getMonth()===$.getMonth()&&A.getFullYear()===$.getFullYear()});break;case"Weekly":const R=new Date($);R.setDate($.getDate()-7),N=N.filter(S=>new Date(S.created_at)>=R);break;case"Monthly":const I=new Date($);I.setMonth($.getMonth()-1),N=N.filter(S=>new Date(S.created_at)>=I);break}l(N)},_=i=>{c(i),x(""),v(""),y(r,i,"","")},P=()=>{d&&h&&y(r,"",d,h)},T=new Date().toISOString().split("T")[0],L=s.length>0?s.reduce((i,g)=>i+parseFloat(g.amount||0),0):0,D=r.filter(i=>i.created_at<new Date(T)).reduce((i,g)=>i+parseFloat(g.amount||0),0),j=D?(L-D)/D*100:0,F=r.filter(i=>i.created_at<new Date(T)),E=s.length>0?L/s.length:0,B=F.length>0?D/F.length:0,M=B?(E-B)/B*100:0,V=s.length>0?s.filter(i=>i.status==="success").length:0,Y=F.length>0?F.filter(i=>i.status==="success").length:0,w=s.length>0?V/s.length*100:0,U=F.length>0?Y/F.length*100:0,W=(w-U).toFixed(2),C=!s||s.length===0?[]:[...new Set(s.map(m=>new Date(m.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})))].sort((m,p)=>new Date(m.split("/").reverse().join("-"))-new Date(p.split("/").reverse().join("-"))).map(m=>{const p=s.filter(A=>new Date(A.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})===m),N=p.reduce((A,ke)=>A+parseFloat(ke.amount||0),0)||0,$=p.filter(A=>A.status==="success").length||0,R=p.length||0,I=R>0?$/R*100:0,S=R>0?N/R:0;return{date:m,totalAmount:N,successRate:I,avgTicket:S}}),ie=t.map(i=>{const g=s.filter(m=>String(m.operator)===String(i.operator_id)).reduce((m,p)=>m+Number(p.amount||0),0)||0;return{operator_name:i.operator_name,total_amount:g}}),oe=()=>{const i=[["Total Recharges",L.toFixed(2),D.toFixed(2),j.toFixed(2)],["Total Revenue",L.toFixed(2),D.toFixed(2),j.toFixed(2)],["Avg Ticket Size",E.toFixed(2),B.toFixed(2),M.toFixed(2)],["Success Rate",w.toFixed(2),U.toFixed(2),W]],g=["Metric","Value (₹)","Yesterday Value (₹)","Comparison (%)"],m=ie.map(S=>[S.operator_name,S.total_amount.toFixed(2)]),p=["Operator Name","Total Amount (₹)"],N=[["Summary Metrics"],...i,g,[""],["Top Operators"],...m,p].map(S=>S.map(A=>`"${A}"`).join(",")).join(`
`),$=new Blob([N],{type:"text/csv"}),R=window.URL.createObjectURL($),I=document.createElement("a");I.href=R,I.download="recharge_dashboard_summary.csv",I.click(),window.URL.revokeObjectURL(R)},Z=({active:i,payload:g,label:m})=>i&&g&&g.length?e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:`Date: ${m}`}),g.map((p,N)=>e.jsx("p",{className:"text-sm text-gray-600",children:`${p.name}: ${p.dataKey==="successRate"?`${p.value.toFixed(2)}%`:`₹${p.value.toLocaleString()}`}`},N))]}):null;return e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Recharge Dashboard"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[e.jsxs("select",{className:"p-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:o,onChange:i=>_(i.target.value),"aria-label":"Select filter period",children:[e.jsx("option",{value:"Daily",children:"Daily"}),e.jsx("option",{value:"Weekly",children:"Weekly"}),e.jsx("option",{value:"Monthly",children:"Monthly"})]}),e.jsx("input",{type:"date",className:"p-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:d,onChange:i=>x(i.target.value),"aria-label":"Start date"}),e.jsx("input",{type:"date",className:"p-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:h,onChange:i=>v(i.target.value),"aria-label":"End date"}),e.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-indigo-300 transition-colors duration-200",onClick:P,disabled:!d||!h,"aria-label":"Apply date filter",children:[e.jsx(Pe,{className:"h-4 w-4 inline mr-1"})," Apply"]}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors duration-200",onClick:oe,"aria-label":"Export data as CSV",children:"Export Data"})]})]}),f?e.jsx("div",{className:"text-center p-8 text-gray-500",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-indigo-100 text-indigo-600 rounded-md",children:e.jsx(Ge,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${j<0?"text-white bg-red-500":"text-white bg-green-500"}`,children:[j<0?e.jsx(ee,{className:"h-3 w-3 mr-1"}):e.jsx(te,{className:"h-3 w-3 mr-1"}),j.toFixed(2),"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Total Recharges"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:["₹",L.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. yesterday (₹",D.toLocaleString(),")"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-100 text-green-600 rounded-md",children:e.jsx(Te,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${j<0?"text-white bg-red-500":"text-white bg-green-500"}`,children:[j<0?e.jsx(ee,{className:"h-3 w-3 mr-1"}):e.jsx(te,{className:"h-3 w-3 mr-1"}),j.toFixed(2),"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:["₹",L.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. yesterday (₹",D.toLocaleString(),")"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 text-purple-600 rounded-md",children:e.jsx(ge,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${M<0?"text-white bg-red-500":"text-white bg-green-500"}`,children:[M<0?e.jsx(ee,{className:"h-3 w-3 mr-1"}):e.jsx(te,{className:"h-3 w-3 mr-1"}),M.toFixed(2),"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Avg Ticket Size"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:["₹",E.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. yesterday (₹",B.toFixed(2),")"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-100 text-yellow-600 rounded-md",children:e.jsx(He,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${W<0?"text-white bg-red-500":"text-white bg-green-500"}`,children:[W<0?e.jsx(ee,{className:"h-3 w-3 mr-1"}):e.jsx(te,{className:"h-3 w-3 mr-1"}),W,"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:[w.toFixed(2),"%"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. yesterday (",U.toFixed(2),"%)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 overflow-hidden",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recharge Amount Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(ce,{width:"100%",height:"100%",children:e.jsxs(we,{data:C,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(re,{dataKey:"date",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ne,{stroke:"#6b7280",tick:{fontSize:12},tickFormatter:i=>`₹${i.toLocaleString()}`}),e.jsx(ue,{content:e.jsx(Z,{})}),e.jsx(me,{wrapperStyle:{fontSize:12}}),e.jsx(X,{type:"monotone",dataKey:"totalAmount",stroke:"#6366f1",strokeWidth:3,dot:{r:5,fill:"#6366f1",stroke:"#fff",strokeWidth:2},activeDot:{r:8},animationDuration:800,name:"Total Recharge Amount"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 overflow-hidden",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Success Rate by Day"}),e.jsx("div",{className:"h-64",children:e.jsx(ce,{width:"100%",height:"100%",children:e.jsxs(ge,{data:C,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(re,{dataKey:"date",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ne,{stroke:"#6b7280",tick:{fontSize:12},domain:[0,100],tickFormatter:i=>`${i}%`}),e.jsx(ue,{content:e.jsx(Z,{})}),e.jsx(me,{wrapperStyle:{fontSize:12}}),e.jsx(Ue,{dataKey:"successRate",fill:"#10b981",radius:[6,6,0,0],barSize:30,animationDuration:800,name:"Success Rate (%)",children:C.map((i,g)=>e.jsx(Cell,{fillOpacity:.8+g*.02},`cell-${g}`))})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 overflow-hidden",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Average Ticket Size"}),e.jsx("div",{className:"h-64",children:e.jsx(ce,{width:"100%",height:"100%",children:e.jsxs(we,{data:C,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(de,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(re,{dataKey:"date",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ne,{stroke:"#6b7280",tick:{fontSize:12},tickFormatter:i=>`₹${i.toLocaleString()}`}),e.jsx(ue,{content:e.jsx(Z,{})}),e.jsx(me,{wrapperStyle:{fontSize:12}}),e.jsx(X,{type:"monotone",dataKey:"avgTicket",stroke:"#f59e0b",strokeWidth:3,dot:{r:5,fill:"#f59e0b",stroke:"#fff",strokeWidth:2},activeDot:{r:8},animationDuration:800,name:"Average Ticket Size"})]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Top Operators"}),e.jsxs("select",{className:"border border-gray-200 rounded-lg bg-white text-sm p-2 focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Sort top operators",children:[e.jsx("option",{value:"volume",children:"By Volume"}),e.jsx("option",{value:"revenue",selected:!0,children:"By Revenue"})]})]}),e.jsx("div",{className:"space-y-4",children:t&&t.length>0?t.map(i=>{const g=s.filter(m=>String(m.operator)===String(i.operator_id)).reduce((m,p)=>m+Number(p.amount||0),0)||0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 mr-3",children:e.jsx("span",{className:"font-medium",children:i.operator_name.charAt(0).toUpperCase()})}),e.jsx("div",{children:e.jsx("p",{className:"font-medium text-gray-800",children:i.operator_name})})]}),e.jsxs("p",{className:"font-bold text-gray-800",children:["₹",g.toLocaleString()]})]},i.id||i.operator_id)}):e.jsx("p",{className:"text-sm text-gray-500",children:"No operators available."})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Recent Transactions"}),e.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"View all transactions",children:"View All"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference ID"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone Number"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Operator"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length>0?[...s].sort((i,g)=>new Date(g.created_at)-new Date(i.created_at)).map(i=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.referenceid}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.canumber}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.operator}),e.jsxs("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",parseFloat(i.amount).toFixed(2)]}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${i.status==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.status})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(i.created_at).toLocaleString()})]},i.referenceid)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 sm:px-6 py-4 text-center text-sm text-gray-500",children:"No transactions found for this period."})})})]})})]})]})]})};export{xt as default};
