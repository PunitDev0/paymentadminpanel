import{r as l,j as e}from"./app-CoXSuXZg.js";import{O as g,f as y,s as f}from"./apis-C3lHX1v6.js";function S(){var p,x;const[h,n]=l.useState([]),[v,i]=l.useState([]),[m,b]=l.useState({}),[d,j]=l.useState(null),[r,c]=l.useState(null),[o,C]=l.useState({});l.useEffect(()=>{async function s(){try{const t=await g();if(!t||!t.data||!t.data.data){console.error("Invalid response format:",t),n([]);return}n(t.data.data)}catch(t){console.error("Error fetching operators:",t),n([])}}s();async function a(){try{const t=await y();if(!t||!t.data||!t.data.data){console.error("Invalid response format:",t),i([]);return}console.log(t.data.data),i(t.data.data)}catch(t){console.error("Error fetching commission:",t),i([])}}a()},[]);const u=s=>{b(a=>({...a,[s]:!a[s]}))},N=async()=>{var s,a;if(r){const t={rate:r.rate||((s=o[r.operator_id])==null?void 0:s.rate)||"",type:r.type||((a=o[r.operator_id])==null?void 0:a.type)||""};await f(r.operator_id,t),c(null)}};return e.jsxs("div",{className:"max-w-full bg-gray-100 mt-6",children:[e.jsx("div",{className:"bg-gray-700 flex justify-between p-4",children:e.jsx("h3",{className:"text-white font-bold",children:"Operator List"})}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300 mt-4",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2",children:"ID"}),e.jsx("th",{className:"border p-2",children:"Operator Name"}),e.jsx("th",{className:"border p-2",children:"Status"}),e.jsx("th",{className:"border p-2",children:"Actions"})]})}),e.jsx("tbody",{children:h.length>0?h.map(s=>e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"p-2 border",children:s.operator_id}),e.jsx("td",{className:"p-2 border",children:s.operator_name}),e.jsx("td",{className:"p-2 border",children:e.jsx("button",{className:`px-4 py-1 rounded-full ${m[s.operator_id]?"bg-green-500 text-white":"bg-red-500 text-white"}`,onClick:()=>u(s.operator_id),children:m[s.operator_id]?"Active":"Inactive"})}),e.jsxs("td",{className:"p-2 border",children:[e.jsx("button",{className:"bg-blue-500 text-white px-2 py-1 rounded mr-2",onClick:()=>handleViewDetails(s),children:"View Details"}),e.jsx("button",{className:"bg-yellow-500 text-white px-2 py-1 rounded",onClick:()=>{var a,t;return c({...s,rate:((a=o[s.operator_id])==null?void 0:a.rate)||"",type:((t=o[s.operator_id])==null?void 0:t.type)||""})},children:"Edit Details"})]})]},s.operator_id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center p-4",children:"No data available"})})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-3/4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Commission Details"}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2",children:"ID"}),e.jsx("th",{className:"border p-2",children:"Operator Name"}),e.jsx("th",{className:"border p-2",children:"Commission Rate"}),e.jsx("th",{className:"border p-2",children:"Commission Type"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2",children:d.operator_id}),e.jsx("td",{className:"border p-2",children:d.operator_name}),e.jsx("td",{className:"border p-2",children:((p=o[d.operator_id])==null?void 0:p.rate)||"Loading..."}),e.jsx("td",{className:"border p-2",children:((x=o[d.operator_id])==null?void 0:x.type)||"Loading..."})]})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded",onClick:()=>j(null),children:"Close"})})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-3/4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Edit Details"}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2",children:"ID"}),e.jsx("th",{className:"border p-2",children:"Operator Name"}),e.jsx("th",{className:"border p-2",children:"Commission Rate"}),e.jsx("th",{className:"border p-2",children:"Commission Type"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2",children:r.operator_id}),e.jsx("td",{className:"border p-2",children:r.operator_name}),e.jsx("td",{className:"border p-2",children:e.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:r.rate,onChange:s=>c({...r,rate:s.target.value})})}),e.jsx("td",{className:"border p-2",children:e.jsxs("select",{className:"w-full border p-2 rounded",value:r.type||"",onChange:s=>c({...r,type:s.target.value}),children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Rental",children:"Rental"}),e.jsx("option",{value:"Percentage",children:"Percentage"})]})})]})})]}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:N,children:"Save"}),e.jsx("button",{className:"bg-gray-500 text-white px-4 py-2 rounded ml-2",onClick:()=>c(null),children:"Cancel"})]})]})})]})}export{S as default};
