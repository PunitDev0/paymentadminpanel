import{r,g as C,b as B,j as e,c as S,d as D,e as _,f as R}from"./app-CyB6Si8G.js";function E(){const[h,m]=r.useState([]),[d,p]=r.useState([]),[s,g]=r.useState("inactive"),[c,o]=r.useState(null),[i,u]=r.useState(""),[l,n]=r.useState({show:!1,bank:null,action:""}),[j,y]=r.useState(!1);r.useEffect(()=>{b(),x()},[]);const b=async()=>{try{const a=await C();Array.isArray(a)?m(a):(m([]),console.warn("Fetched data is not an array:",a))}catch(a){console.error("Error fetching bank details:",a)}},x=async()=>{try{const a=await B();console.log(a),Array.isArray(a)?p(a):(p([]),console.warn("Fetched payment requests data is not an array:",a))}catch(a){console.error("Error fetching payment requests:",a)}},k=async a=>{try{await _(a),b(),o(null)}catch(t){console.error("Error activating bank:",t)}},N=async a=>{try{await R(a),b()}catch(t){console.error("Error deactivating bank:",t)}},f=async a=>{try{await S(a),x()}catch(t){console.error("Error approving request:",t)}},v=async a=>{try{await D(a),x()}catch(t){console.error("Error disapproving request:",t)}},w=Array.isArray(h)?h.filter(a=>{const t=a.bank.toLowerCase().includes(i.toLowerCase())||a.ifsc_code.toLowerCase().includes(i.toLowerCase());return s==="inactive"?a.status===0&&t:a.status===1&&t}):[],A=()=>{l.action==="activate"?k(l.bank.id):l.action==="deactivate"&&N(l.bank.id),n({show:!1,bank:null,action:""})};return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-black",children:"Bank Dashboard"}),e.jsxs("button",{onClick:()=>y(!0),className:"bg-blue-500 text-white px-4 py-2 rounded flex relative items-center",children:["Pending Requests",d.length>0&&e.jsx("span",{className:"ml-2 bg-red-500 text-white rounded-full absolute -top-2 -right-1 px-2 py-1 text-xs",children:d.length})]})]}),e.jsxs("div",{className:"flex space-x-4 mb-4",children:[e.jsx("button",{onClick:()=>g("inactive"),className:`px-4 py-2 rounded ${s==="inactive"?"bg-black text-white":"bg-gray-200 text-black"}`,children:"Inactive Banks"}),e.jsx("button",{onClick:()=>g("active"),className:`px-4 py-2 rounded ${s==="active"?"bg-black text-white":"bg-gray-200 text-black"}`,children:"Active Banks"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by Bank Name or IFSC",value:i,onChange:a=>u(a.target.value),className:"border border-gray-300 px-3 py-2 rounded w-full text-black"})}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Bank Name"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Account Holder"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Account Number"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"IFSC Code"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"User"}),s==="active"&&e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Activated On"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Actions"})]})}),e.jsx("tbody",{children:w.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.bank}),e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.account_name}),e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.account_number}),e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.ifsc_code}),e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.username}),s==="active"&&e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:new Date(a.updated_at).toLocaleString()}),e.jsx("td",{className:"border border-gray-300 p-2",children:s==="inactive"?e.jsx("button",{className:"bg-black text-white px-3 py-1 rounded",onClick:()=>o(a),children:"View Details"}):e.jsx("button",{className:"bg-gray-500 text-white px-3 py-1 rounded",onClick:()=>n({show:!0,bank:a,action:"deactivate"}),children:"Deactivate"})})]},a.id))})]}),j&&e.jsx("div",{className:"  fixed inset-0 flex justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-3/4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-black",children:"Pending Payment Requests"}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Select Type"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Amount"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Transaction ID"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Deposited Date"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Bank Account"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"User Name"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Image"}),e.jsx("th",{className:"border border-gray-300 p-2 text-black",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.transaction_type}),e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.amount}),e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.transaction_id}),e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.deposited_date}),e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.bank?a.bank.bank:"N/A"}),e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.user?a.user.name:"N/A"}),e.jsx("td",{className:"border border-gray-300 p-2 text-black",children:a.file_path}),e.jsxs("td",{className:"border border-gray-300 p-2",children:[e.jsx("button",{className:"bg-green-500 text-white px-3 py-1 rounded mr-2",onClick:()=>f(a.id),children:"Approve"}),e.jsx("button",{className:"bg-red-500 text-white px-3 py-1 rounded",onClick:()=>v(a.id),children:"Disapprove"})]})]},a.id))})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{className:"bg-gray-400 text-white px-4 py-2 rounded",onClick:()=>y(!1),children:"Close"})})]})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-96",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-black",children:"Bank Details"}),e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"Bank Name:"})," ",c.bank]}),e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"Account Name:"})," ",c.account_name]}),e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"Account Number:"})," ",c.account_number]}),e.jsxs("p",{className:"text-black",children:[e.jsx("strong",{children:"IFSC Code:"})," ",c.ifsc_code]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx("button",{className:"bg-black text-white px-4 py-2 rounded",onClick:()=>n({show:!0,bank:c,action:"activate"}),children:"Activate"}),e.jsx("button",{className:"bg-gray-400 text-white px-4 py-2 rounded",onClick:()=>o(null),children:"Cancel"})]})]})}),l.show&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-96",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-black",children:"Confirm Action"}),e.jsxs("p",{className:"text-black",children:["Are you sure you want to"," ",e.jsx("span",{className:"font-bold",children:l.action==="activate"?"activate":"deactivate"})," ","this bank?"]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx("button",{className:"bg-black text-white px-4 py-2 rounded",onClick:A,children:"Yes"}),e.jsx("button",{className:"bg-gray-400 text-white px-4 py-2 rounded",onClick:()=>n({show:!1,bank:null,action:""}),children:"Cancel"})]})]})})]})}export{E as default};
