import{v as ne,T as k,r as z,O as ke,V as _e,j as e,W as Oe}from"./app-C_d7hnuU.js";import{i as Pe,D as Te,f as Fe,E as Le,L as oe,a as Q,C as Re,A as Ee,b as Z,c as Ce,d as he,h as Ie,e as $e,g as Ae,u as Be,G as Me,j as fe,k as We,X as te,Y as ae,l as Ke,B as ye,R as le,m as ce,T as de,n as ue,o as ze}from"./BarChart-BH2_EGFb.js";import{c as ge}from"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],me=ne("ArrowDown",Ue);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ee=ne("ArrowUp",Ve);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],qe=ne("DollarSign",Ye);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],He=ne("Zap",Ge);var Xe=["type","layout","connectNulls","ref"],Ze=["key"];function H(t){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},H(t)}function ve(t,n){if(t==null)return{};var r=Je(t,n),a,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)a=l[s],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function Je(t,n){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(n.indexOf(a)>=0)continue;r[a]=t[a]}return r}function J(){return J=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},J.apply(this,arguments)}function be(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,a)}return r}function P(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?be(Object(r),!0).forEach(function(a){$(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function G(t){return at(t)||tt(t)||et(t)||Qe()}function Qe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function et(t,n){if(t){if(typeof t=="string")return pe(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(t,n)}}function tt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function at(t){if(Array.isArray(t))return pe(t)}function pe(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,a=new Array(n);r<n;r++)a[r]=t[r];return a}function rt(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function je(t,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,De(a.key),a)}}function nt(t,n,r){return n&&je(t.prototype,n),r&&je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function st(t,n,r){return n=re(n),it(t,Ne()?Reflect.construct(n,r||[],re(t).constructor):n.apply(t,r))}function it(t,n){if(n&&(H(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ot(t)}function ot(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ne=function(){return!!t})()}function re(t){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},re(t)}function lt(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&xe(t,n)}function xe(t,n){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},xe(t,n)}function $(t,n,r){return n=De(n),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function De(t){var n=ct(t,"string");return H(n)=="symbol"?n:n+""}function ct(t,n){if(H(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,n);if(H(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var X=function(t){function n(){var r;rt(this,n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=st(this,n,[].concat(s)),$(r,"state",{isAnimationFinished:!0,totalLength:0}),$(r,"generateSimpleStrokeDasharray",function(o,c){return"".concat(c,"px ").concat(o-c,"px")}),$(r,"getStrokeDasharray",function(o,c,d){var h=d.reduce(function(T,F){return T+F});if(!h)return r.generateSimpleStrokeDasharray(c,o);for(var m=Math.floor(o/h),y=o%h,p=c-o,g=[],u=0,f=0;u<d.length;f+=d[u],++u)if(f+d[u]>y){g=[].concat(G(d.slice(0,u)),[y-f]);break}var _=g.length%2===0?[0,p]:[p];return[].concat(G(n.repeat(d,m)),G(g),_).map(function(T){return"".concat(T,"px")}).join(", ")}),$(r,"id",Be("recharts-line-")),$(r,"pathRef",function(o){r.mainCurve=o}),$(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),$(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return lt(n,t),nt(n,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,o=l.points,c=l.xAxis,d=l.yAxis,h=l.layout,m=l.children,y=Fe(m,Le);if(!y)return null;var p=function(f,_){return{x:f.x,y:f.y,value:f.value,errorVal:Ae(f.payload,_)}},g={clipPath:a?"url(#clipPath-".concat(s,")"):null};return k.createElement(oe,g,y.map(function(u){return k.cloneElement(u,{key:"bar-".concat(u.props.dataKey),data:o,xAxis:c,yAxis:d,layout:h,dataPointFormatter:p})}))}},{key:"renderDots",value:function(a,s,l){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var c=this.props,d=c.dot,h=c.points,m=c.dataKey,y=Q(this.props,!1),p=Q(d,!0),g=h.map(function(f,_){var T=P(P(P({key:"dot-".concat(_),r:3},y),p),{},{value:f.value,dataKey:m,cx:f.x,cy:f.y,index:_,payload:f.payload});return n.renderDotItem(d,T)}),u={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(l,")"):null};return k.createElement(oe,J({className:"recharts-line-dots",key:"dots"},u),g)}},{key:"renderCurveStatically",value:function(a,s,l,o){var c=this.props,d=c.type,h=c.layout,m=c.connectNulls;c.ref;var y=ve(c,Xe),p=P(P(P({},Q(y,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(l,")"):null,points:a},o),{},{type:d,layout:h,connectNulls:m});return k.createElement(Re,J({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var l=this,o=this.props,c=o.points,d=o.strokeDasharray,h=o.isAnimationActive,m=o.animationBegin,y=o.animationDuration,p=o.animationEasing,g=o.animationId,u=o.animateNewValues,f=o.width,_=o.height,T=this.state,F=T.prevPoints,L=T.totalLength;return k.createElement(Ee,{begin:m,duration:y,isActive:h,easing:p,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var w=N.t;if(F){var R=F.length/c.length,C=c.map(function(j,V){var W=Math.floor(V*R);if(F[W]){var q=F[W],K=Z(q.x,j.x),se=Z(q.y,j.y);return P(P({},j),{},{x:K(w),y:se(w)})}if(u){var ie=Z(f*2,j.x),i=Z(_/2,j.y);return P(P({},j),{},{x:ie(w),y:i(w)})}return P(P({},j),{},{x:j.x,y:j.y})});return l.renderCurveStatically(C,a,s)}var B=Z(0,L),M=B(w),U;if(d){var Y="".concat(d).split(/[,\s]+/gim).map(function(j){return parseFloat(j)});U=l.getStrokeDasharray(M,L,Y)}else U=l.generateSimpleStrokeDasharray(L,M);return l.renderCurveStatically(c,a,s,{strokeDasharray:U})})}},{key:"renderCurve",value:function(a,s){var l=this.props,o=l.points,c=l.isAnimationActive,d=this.state,h=d.prevPoints,m=d.totalLength;return c&&o&&o.length&&(!h&&m>0||!Ce(h,o))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(o,a,s)}},{key:"render",value:function(){var a,s=this.props,l=s.hide,o=s.dot,c=s.points,d=s.className,h=s.xAxis,m=s.yAxis,y=s.top,p=s.left,g=s.width,u=s.height,f=s.isAnimationActive,_=s.id;if(l||!c||!c.length)return null;var T=this.state.isAnimationFinished,F=c.length===1,L=ge("recharts-line",d),N=h&&h.allowDataOverflow,w=m&&m.allowDataOverflow,R=N||w,C=he(_)?this.id:_,B=(a=Q(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},M=B.r,U=M===void 0?3:M,Y=B.strokeWidth,j=Y===void 0?2:Y,V=Ie(o)?o:{},W=V.clipDot,q=W===void 0?!0:W,K=U*2+j;return k.createElement(oe,{className:L},N||w?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(C)},k.createElement("rect",{x:N?p:p-g/2,y:w?y:y-u/2,width:N?g:g*2,height:w?u:u*2})),!q&&k.createElement("clipPath",{id:"clipPath-dots-".concat(C)},k.createElement("rect",{x:p-K/2,y:y-K/2,width:g+K,height:u+K}))):null,!F&&this.renderCurve(R,C),this.renderErrorBar(R,C),(F||o)&&this.renderDots(R,q,C),(!f||T)&&$e.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var l=a.length%2!==0?[].concat(G(a),[0]):a,o=[],c=0;c<s;++c)o=[].concat(G(o),G(l));return o}},{key:"renderDotItem",value:function(a,s){var l;if(k.isValidElement(a))l=k.cloneElement(a,s);else if(Pe(a))l=a(s);else{var o=s.key,c=ve(s,Ze),d=ge("recharts-line-dot",typeof a!="boolean"?a.className:"");l=k.createElement(Te,J({key:o},c,{className:d}))}return l}}])}(z.PureComponent);$(X,"displayName","Line");$(X,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Me.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});$(X,"getComposedData",function(t){var n=t.props,r=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,o=t.dataKey,c=t.bandSize,d=t.displayedData,h=t.offset,m=n.layout,y=d.map(function(p,g){var u=Ae(p,o);return m==="horizontal"?{x:fe({axis:r,ticks:s,bandSize:c,entry:p,index:g}),y:he(u)?null:a.scale(u),value:u,payload:p}:{x:he(u)?null:r.scale(u),y:fe({axis:a,ticks:l,bandSize:c,entry:p,index:g}),value:u,payload:p}});return P({points:y,layout:m},h)});var we=We({chartName:"LineChart",GraphicalChild:X,axisComponents:[{axisType:"xAxis",AxisComp:te},{axisType:"yAxis",AxisComp:ae}],formatAxisMap:Ke});const ht=()=>{const[t,n]=z.useState([]),[r,a]=z.useState([]),[s,l]=z.useState([]),[o,c]=z.useState("Daily"),[d,h]=z.useState(""),[m,y]=z.useState(""),[p,g]=z.useState(!1);z.useEffect(()=>{u()},[]);const u=async()=>{g(!0);try{const i=await ke();console.log("Fetched Operators:",i.data.data),n(i.data.data);const v=await _e();console.log("Fetched Recharge Transactions:",v.data.data);const x=v.data.data.map(b=>({...b,created_at:new Date(b.created_at)}));a(x),f(x,o,d,m)}catch(i){console.error("Error fetching data:",i)}finally{g(!1)}},f=(i,v,x,b)=>{let A=[...i];const I=new Date;if(x&&b){const O=new Date(x),E=new Date(b);E.setHours(23,59,59,999),A=A.filter(D=>{const S=new Date(D.created_at);return S>=O&&S<=E}),console.log("Date Range Filter Applied:",{startDate:O,endDate:E,filtered:A})}else{switch(v){case"Daily":A=A.filter(D=>{const S=new Date(D.created_at);return S.getDate()===I.getDate()&&S.getMonth()===I.getMonth()&&S.getFullYear()===I.getFullYear()});break;case"Weekly":const O=new Date(I);O.setDate(I.getDate()-7),A=A.filter(D=>new Date(D.created_at)>=O);break;case"Monthly":const E=new Date(I);E.setMonth(I.getMonth()-1),A=A.filter(D=>new Date(D.created_at)>=E);break}console.log(`${v} Filter Applied:`,A)}l(A)},_=i=>{c(i),h(""),y(""),f(r,i,"","")},T=()=>{d&&m&&f(r,"",d,m)},F=new Date().toISOString().split("T")[0],L=s.length>0?s.reduce((i,v)=>i+parseFloat(v.amount||0),0):0,N=r.filter(i=>i.created_at<new Date(F)).reduce((i,v)=>i+parseFloat(v.amount||0),0),w=N?(L-N)/N*100:0,R=r.filter(i=>i.created_at<new Date(F)),C=s.length>0?L/s.length:0,B=R.length>0?N/R.length:0,M=B?(C-B)/B*100:0,U=s.length>0?s.filter(i=>i.status==="success").length:0,Y=R.length>0?R.filter(i=>i.status==="success").length:0,j=s.length>0?U/s.length*100:0,V=R.length>0?Y/R.length*100:0,W=(j-V).toFixed(2),K=(()=>{if(!s||s.length===0)return[];const v=[...new Set(s.map(x=>new Date(x.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})))].sort((x,b)=>new Date(x.split("/").reverse().join("-"))-new Date(b.split("/").reverse().join("-"))).map(x=>{const b=s.filter(S=>new Date(S.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})===x),A=b.reduce((S,Se)=>S+parseFloat(Se.amount||0),0)||0,I=b.filter(S=>S.status==="success").length||0,O=b.length||0,E=O>0?I/O*100:0,D=O>0?A/O:0;return{date:x,totalAmount:A,successRate:E,avgTicket:D}});return console.log("Chart Data:",v),v})(),se=t.map(i=>{const v=s.filter(x=>String(x.operator)===String(i.operator_id)).reduce((x,b)=>x+Number(b.amount||0),0)||0;return{operator_name:i.operator_name,total_amount:v}}),ie=()=>{const i=[["Total Recharges",L,N,w.toFixed(2)],["Total Revenue",L,N,w.toFixed(2)],["Avg Ticket Size",C.toFixed(2),B.toFixed(2),M.toFixed(2)],["Success Rate",j.toFixed(2),V.toFixed(2),W]],v=["Metric","Value (₹)","Yesterday Value (₹)","Comparison (%)"],x=se.map(D=>[D.operator_name,D.total_amount]),b=["Operator Name","Total Amount (₹)"],A=[["Summary Metrics"],...i,v,[""],["Top Operators"],...x,b].map(D=>D.join(",")).join(`
`),I=new Blob([A],{type:"text/csv"}),O=window.URL.createObjectURL(I),E=document.createElement("a");E.href=O,E.download="recharge_dashboard_summary.csv",E.click(),window.URL.revokeObjectURL(O)};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Recharge Dashboard"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{className:"p-2 border rounded",value:o,onChange:i=>_(i.target.value),children:[e.jsx("option",{value:"Daily",children:"Daily"}),e.jsx("option",{value:"Weekly",children:"Weekly"}),e.jsx("option",{value:"Monthly",children:"Monthly"})]}),e.jsx("input",{type:"date",className:"p-2 border rounded",value:d,onChange:i=>h(i.target.value),placeholder:"dd-mm-yyyy"}),e.jsx("input",{type:"date",className:"p-2 border rounded",value:m,onChange:i=>y(i.target.value),placeholder:"dd-mm-yyyy"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:T,disabled:!d||!m,children:"Apply Date Filter"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded",onClick:ie,children:"Export Data"})]})]}),p?e.jsx("div",{className:"text-center p-8",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 text-blue-600 rounded-md",children:e.jsx(Oe,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${String(w).includes("-")?"text-white bg-red-500":"text-white bg-green-500"}`,children:[String(w).includes("-")?e.jsx(me,{className:"h-3 w-3 mr-1"}):e.jsx(ee,{className:"h-3 w-3 mr-1"}),w.toFixed(2),"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Total Recharges"}),e.jsxs("p",{className:"text-3xl font-bold",children:["₹",L.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. till yesterday (₹",N.toLocaleString()," recharges)"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-100 text-green-600 rounded-md",children:e.jsx(qe,{className:"h-6 w-6"})}),e.jsxs("span",{className:"text-sm font-medium text-green-600 bg-green-100 px-2.5 py-0.5 rounded-full flex items-center",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),"5.2%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["₹",L.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. last period (₹",N.toLocaleString(),")"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 text-purple-600 rounded-md",children:e.jsx(ye,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${String(M).includes("-")?"text-red-600 bg-red-100":"text-green-600 bg-green-100"}`,children:[String(M).includes("-")?e.jsx(me,{className:"h-3 w-3 mr-1"}):e.jsx(ee,{className:"h-3 w-3 mr-1"}),M.toFixed(2),"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Avg Ticket Size"}),e.jsxs("p",{className:"text-3xl font-bold",children:["₹",C.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. last period (₹",B.toFixed(2),")"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-100 text-yellow-600 rounded-md",children:e.jsx(He,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${String(W).includes("-")?"text-red-600 bg-red-100":"text-green-600 bg-green-100"}`,children:[String(W).includes("-")?e.jsx(me,{className:"h-3 w-3 mr-1"}):e.jsx(ee,{className:"h-3 w-3 mr-1"}),W,"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Success Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[j.toFixed(2),"%"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. last period (",V.toFixed(2),"%)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 border rounded-lg p-4 bg-white shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recharge Amount Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(we,{data:K,children:[e.jsx(ce,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"date"}),e.jsx(ae,{}),e.jsx(de,{formatter:i=>`₹${i.toFixed(2)}`}),e.jsx(ue,{}),e.jsx(X,{type:"monotone",dataKey:"totalAmount",stroke:"#0088FE",strokeWidth:2,name:"Total Recharge Amount",dot:{strokeWidth:2,r:4}})]})})})]}),e.jsxs("div",{className:"mb-8 border rounded-lg p-4 bg-white shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Success Rate by Day"}),e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(ye,{data:K,children:[e.jsx(ce,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"date"}),e.jsx(ae,{domain:[0,100]}),e.jsx(de,{formatter:i=>`${i.toFixed(2)}%`}),e.jsx(ue,{}),e.jsx(ze,{dataKey:"successRate",fill:"#00C49F",name:"Success Rate (%)"})]})})})]}),e.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Average Ticket Size"}),e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(we,{data:K,children:[e.jsx(ce,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"date"}),e.jsx(ae,{}),e.jsx(de,{formatter:i=>`₹${i.toFixed(2)}`}),e.jsx(ue,{}),e.jsx(X,{type:"monotone",dataKey:"avgTicket",stroke:"#FF8042",strokeWidth:2,name:"Average Ticket Size",dot:{strokeWidth:2,r:4}})]})})})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Top Operators"}),e.jsxs("select",{className:"border border-gray-300 rounded-md text-sm p-2",children:[e.jsx("option",{value:"volume",children:"By Volume"}),e.jsx("option",{value:"revenue",selected:!0,children:"By Revenue"})]})]}),e.jsx("div",{className:"space-y-4",children:t&&t.map(i=>{const v=s.filter(x=>String(x.operator)===String(i.operator_id)).reduce((x,b)=>x+Number(b.amount||0),0)||0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center text-red-600 mr-3",children:e.jsx("span",{className:"font-medium",children:i.operator_name.charAt(0).toUpperCase()})}),e.jsx("div",{children:e.jsx("p",{className:"font-medium",children:i.operator_name})})]}),e.jsxs("p",{className:"font-bold",children:["₹",v.toLocaleString()]})]},i.id||i.operator_id)})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Recent Transactions"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Operator"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length>0?[...s].sort((i,v)=>new Date(v.created_at)-new Date(i.created_at)).map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.referenceid}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.canumber}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.operator}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",parseFloat(i.amount).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${i.status==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(i.created_at).toLocaleString()})]},i.referenceid)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No transactions found for this period."})})})]})})]})]})]})};export{ht as default};
