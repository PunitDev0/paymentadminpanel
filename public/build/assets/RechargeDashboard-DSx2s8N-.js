import{c as _e,A as O,r as V,O as Le,_ as Re,j as e}from"./app-DE-wH-X1.js";import{F as Ee}from"./filter-DorCDeSq.js";import{A as te,a as ae}from"./arrow-up-DH5N534g.js";import{D as $e,P as ze}from"./percent-DkfryRfM.js";import{i as Ie,D as Be,f as We,E as Me,L as ge,a as ce,C as Ke,A as Ve,b as re,c as Ue,d as ye,h as Ye,e as Ge,g as Fe,u as qe,G as He,j as we,k as Xe,X as se,Y as ne,l as Ze,B as Ne,R as de,m as me,T as ue,n as he,o as Je,p as Qe}from"./BarChart-Q2HcZHt1.js";import{c as Ae}from"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],tt=_e("Phone",et);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],rt=_e("Zap",at);var st=["type","layout","connectNulls","ref"],nt=["key"];function Q(t){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Q(t)}function Se(t,s){if(t==null)return{};var r=it(t,s),a,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function it(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function ie(){return ie=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ie.apply(this,arguments)}function De(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function P(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?De(Object(r),!0).forEach(function(a){I(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function J(t){return dt(t)||ct(t)||lt(t)||ot()}function ot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lt(t,s){if(t){if(typeof t=="string")return ve(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ve(t,s)}}function ct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dt(t){if(Array.isArray(t))return ve(t)}function ve(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function mt(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ke(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Te(a.key),a)}}function ut(t,s,r){return s&&ke(t.prototype,s),r&&ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ht(t,s,r){return s=pe(s),pt(t,Oe()?Reflect.construct(s,r||[],pe(t).constructor):s.apply(t,r))}function pt(t,s){if(s&&(Q(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xt(t)}function xt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oe=function(){return!!t})()}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pe(t)}function gt(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&be(t,s)}function be(t,s){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},be(t,s)}function I(t,s,r){return s=Te(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Te(t){var s=ft(t,"string");return Q(s)=="symbol"?s:s+""}function ft(t,s){if(Q(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(Q(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var q=function(t){function s(){var r;mt(this,s);for(var a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return r=ht(this,s,[].concat(n)),I(r,"state",{isAnimationFinished:!0,totalLength:0}),I(r,"generateSimpleStrokeDasharray",function(o,c){return"".concat(c,"px ").concat(o-c,"px")}),I(r,"getStrokeDasharray",function(o,c,d){var x=d.reduce(function(L,R){return L+R});if(!x)return r.generateSimpleStrokeDasharray(c,o);for(var p=Math.floor(o/x),b=o%x,g=c-o,j=[],u=0,f=0;u<d.length;f+=d[u],++u)if(f+d[u]>b){j=[].concat(J(d.slice(0,u)),[b-f]);break}var T=j.length%2===0?[0,g]:[g];return[].concat(J(s.repeat(d,p)),J(j),T).map(function(L){return"".concat(L,"px")}).join(", ")}),I(r,"id",qe("recharts-line-")),I(r,"pathRef",function(o){r.mainCurve=o}),I(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),I(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return gt(s,t),ut(s,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,o=l.points,c=l.xAxis,d=l.yAxis,x=l.layout,p=l.children,b=We(p,Me);if(!b)return null;var g=function(f,T){return{x:f.x,y:f.y,value:f.value,errorVal:Fe(f.payload,T)}},j={clipPath:a?"url(#clipPath-".concat(n,")"):null};return O.createElement(ge,j,b.map(function(u){return O.cloneElement(u,{key:"bar-".concat(u.props.dataKey),data:o,xAxis:c,yAxis:d,layout:x,dataPointFormatter:g})}))}},{key:"renderDots",value:function(a,n,l){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var c=this.props,d=c.dot,x=c.points,p=c.dataKey,b=ce(this.props,!1),g=ce(d,!0),j=x.map(function(f,T){var L=P(P(P({key:"dot-".concat(T),r:3},b),g),{},{value:f.value,dataKey:p,cx:f.x,cy:f.y,index:T,payload:f.payload});return s.renderDotItem(d,L)}),u={clipPath:a?"url(#clipPath-".concat(n?"":"dots-").concat(l,")"):null};return O.createElement(ge,ie({className:"recharts-line-dots",key:"dots"},u),j)}},{key:"renderCurveStatically",value:function(a,n,l,o){var c=this.props,d=c.type,x=c.layout,p=c.connectNulls;c.ref;var b=Se(c,st),g=P(P(P({},ce(b,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:n?"url(#clipPath-".concat(l,")"):null,points:a},o),{},{type:d,layout:x,connectNulls:p});return O.createElement(Ke,ie({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,n){var l=this,o=this.props,c=o.points,d=o.strokeDasharray,x=o.isAnimationActive,p=o.animationBegin,b=o.animationDuration,g=o.animationEasing,j=o.animationId,u=o.animateNewValues,f=o.width,T=o.height,L=this.state,R=L.prevPoints,E=L.totalLength;return O.createElement(Ve,{begin:p,duration:b,isActive:x,easing:g,from:{t:0},to:{t:1},key:"line-".concat(j),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var w=k.t;if(R){var S=R.length/c.length,z=c.map(function(A,Y){var M=Math.floor(Y*S);if(R[M]){var K=R[M],C=re(K.x,A.x),X=re(K.y,A.y);return P(P({},A),{},{x:C(w),y:X(w)})}if(u){var oe=re(f*2,A.x),Z=re(T/2,A.y);return P(P({},A),{},{x:oe(w),y:Z(w)})}return P(P({},A),{},{x:A.x,y:A.y})});return l.renderCurveStatically(z,a,n)}var B=re(0,E),W=B(w),U;if(d){var H="".concat(d).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});U=l.getStrokeDasharray(W,E,H)}else U=l.generateSimpleStrokeDasharray(E,W);return l.renderCurveStatically(c,a,n,{strokeDasharray:U})})}},{key:"renderCurve",value:function(a,n){var l=this.props,o=l.points,c=l.isAnimationActive,d=this.state,x=d.prevPoints,p=d.totalLength;return c&&o&&o.length&&(!x&&p>0||!Ue(x,o))?this.renderCurveWithAnimation(a,n):this.renderCurveStatically(o,a,n)}},{key:"render",value:function(){var a,n=this.props,l=n.hide,o=n.dot,c=n.points,d=n.className,x=n.xAxis,p=n.yAxis,b=n.top,g=n.left,j=n.width,u=n.height,f=n.isAnimationActive,T=n.id;if(l||!c||!c.length)return null;var L=this.state.isAnimationFinished,R=c.length===1,E=Ae("recharts-line",d),k=x&&x.allowDataOverflow,w=p&&p.allowDataOverflow,S=k||w,z=ye(T)?this.id:T,B=(a=ce(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},W=B.r,U=W===void 0?3:W,H=B.strokeWidth,A=H===void 0?2:H,Y=Ye(o)?o:{},M=Y.clipDot,K=M===void 0?!0:M,C=U*2+A;return O.createElement(ge,{className:E},k||w?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(z)},O.createElement("rect",{x:k?g:g-j/2,y:w?b:b-u/2,width:k?j:j*2,height:w?u:u*2})),!K&&O.createElement("clipPath",{id:"clipPath-dots-".concat(z)},O.createElement("rect",{x:g-C/2,y:b-C/2,width:j+C,height:u+C}))):null,!R&&this.renderCurve(S,z),this.renderErrorBar(S,z),(R||o)&&this.renderDots(S,K,z),(!f||L)&&Ge.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(a,n){return a.animationId!==n.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:n.curPoints}:a.points!==n.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,n){for(var l=a.length%2!==0?[].concat(J(a),[0]):a,o=[],c=0;c<n;++c)o=[].concat(J(o),J(l));return o}},{key:"renderDotItem",value:function(a,n){var l;if(O.isValidElement(a))l=O.cloneElement(a,n);else if(Ie(a))l=a(n);else{var o=n.key,c=Se(n,nt),d=Ae("recharts-line-dot",typeof a!="boolean"?a.className:"");l=O.createElement(Be,ie({key:o},c,{className:d}))}return l}}])}(V.PureComponent);I(q,"displayName","Line");I(q,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!He.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});I(q,"getComposedData",function(t){var s=t.props,r=t.xAxis,a=t.yAxis,n=t.xAxisTicks,l=t.yAxisTicks,o=t.dataKey,c=t.bandSize,d=t.displayedData,x=t.offset,p=s.layout,b=d.map(function(g,j){var u=Fe(g,o);return p==="horizontal"?{x:we({axis:r,ticks:n,bandSize:c,entry:g,index:j}),y:ye(u)?null:a.scale(u),value:u,payload:g}:{x:ye(u)?null:r.scale(u),y:we({axis:a,ticks:l,bandSize:c,entry:g,index:j}),value:u,payload:g}});return P({points:b,layout:p},x)});var fe=Xe({chartName:"LineChart",GraphicalChild:q,axisComponents:[{axisType:"xAxis",AxisComp:se},{axisType:"yAxis",AxisComp:ne}],formatAxisMap:Ze});const St=()=>{const[t,s]=V.useState([]),[r,a]=V.useState([]),[n,l]=V.useState([]),[o,c]=V.useState("All"),[d,x]=V.useState(""),[p,b]=V.useState(""),[g,j]=V.useState(!1);V.useEffect(()=>{u()},[]);const u=async()=>{j(!0);try{const i=await Le();s(i.data.data);const N=(await Re()).data.data.map(h=>{var y;return{...h,created_at:new Date(h.created_at),operator_name:((y=i.data.data.find(v=>String(v.operator_id)===String(h.operator)))==null?void 0:y.operator_name)||h.operator}});a(N),f(N,o,d,p)}catch(i){console.error("Error fetching data:",i)}finally{j(!1)}},f=(i,m,N,h)=>{let y=[...i];const v=new Date;if(N&&h){const _=new Date(N),F=new Date(h);F.setHours(23,59,59,999),y=y.filter(D=>{const $=new Date(D.created_at);return $>=_&&$<=F})}else if(m!=="All")switch(m){case"Daily":y=y.filter(D=>{const $=new Date(D.created_at);return $.getDate()===v.getDate()&&$.getMonth()===v.getMonth()&&$.getFullYear()===v.getFullYear()});break;case"Weekly":const _=new Date(v);_.setDate(v.getDate()-7),y=y.filter(D=>new Date(D.created_at)>=_);break;case"Monthly":const F=new Date(v);F.setMonth(v.getMonth()-1),y=y.filter(D=>new Date(D.created_at)>=F);break}l(y)},T=i=>{c(i),x(""),b(""),f(r,i,"","")},L=()=>{d&&p&&f(r,"",d,p)},R=new Date().toISOString().split("T")[0],E=n.length>0?n.reduce((i,m)=>i+parseFloat(m.amount||0),0):0,k=r.filter(i=>i.created_at<new Date(R)).reduce((i,m)=>i+parseFloat(m.amount||0),0),w=k?(E-k)/k*100:0,S=r.filter(i=>i.created_at<new Date(R)),z=n.length>0?E/n.length:0,B=S.length>0?k/S.length:0,W=B?(z-B)/B*100:0,U=n.length>0?n.filter(i=>i.status==="success").length:0,H=S.length>0?S.filter(i=>i.status==="success").length:0,A=n.length>0?U/n.length*100:0,Y=S.length>0?H/S.length*100:0,M=(A-Y).toFixed(2),K=n.length>0?n.reduce((i,m)=>i+parseFloat(m.commission_amount||0),0):0,C=S.length>0?S.reduce((i,m)=>i+parseFloat(m.commission_amount||0),0):0,X=C?(K-C)/C*100:0,oe=n.length>0?K/n.length:0,Z=S.length>0?C/S.length:0,Ce=Z?(oe-Z)/Z*100:0,ee=!n||n.length===0?[]:[...new Set(n.map(N=>new Date(N.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})))].sort((N,h)=>new Date(N.split("/").reverse().join("-"))-new Date(h.split("/").reverse().join("-"))).map(N=>{const h=n.filter(G=>new Date(G.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})===N),y=h.reduce((G,xe)=>G+parseFloat(xe.amount||0),0)||0,v=h.reduce((G,xe)=>G+parseFloat(xe.commission_amount||0),0)||0,_=h.filter(G=>G.status==="success").length||0,F=h.length||0,D=F>0?_/F*100:0,$=F>0?y/F:0;return{date:N,totalAmount:y,totalCommission:v,successRate:D,avgTicket:$}}),je=t.map(i=>{const m=n.filter(v=>String(v.operator)===String(i.operator_id)),N=m.reduce((v,_)=>v+Number(_.amount||0),0)||0,h=m.reduce((v,_)=>v+Number(_.commission_amount||0),0)||0,y=m.length>0?m.reduce((v,_)=>v+Number(_.our_commission||0),0)/m.length:0;return{operator_name:i.operator_name,total_amount:N,total_commission:h,avg_commission_percentage:y}}),Pe=()=>{const i=[["Total Recharges",E.toFixed(2),k.toFixed(2),w.toFixed(2)],["Total Revenue",E.toFixed(2),k.toFixed(2),w.toFixed(2)],["Total Commission",K.toFixed(2),C.toFixed(2),X.toFixed(2)],["Avg Ticket Size",z.toFixed(2),B.toFixed(2),W.toFixed(2)],["Avg Commission",oe.toFixed(2),Z.toFixed(2),Ce.toFixed(2)],["Success Rate",A.toFixed(2),Y.toFixed(2),M]],m=["Metric","Value (₹)","Yesterday Value (₹)","Comparison (%)"],N=je.map(D=>[D.operator_name,D.total_amount.toFixed(2),D.total_commission.toFixed(2),D.avg_commission_percentage.toFixed(2)]),h=["Operator Name","Total Amount (₹)","Total Commission (₹)","Avg Commission (%)"],y=[["Summary Metrics"],m,...i,[""],["Top Operators"],h,...N].map(D=>D.map($=>`"${$}"`).join(",")).join(`
`),v=new Blob([y],{type:"text/csv"}),_=window.URL.createObjectURL(v),F=document.createElement("a");F.href=_,F.download="recharge_dashboard_summary.csv",F.click(),window.URL.revokeObjectURL(_)},le=({active:i,payload:m,label:N})=>i&&m&&m.length?e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:`Date: ${N}`}),m.map((h,y)=>e.jsx("p",{className:"text-sm text-gray-600",children:`${h.name}: ${h.dataKey==="successRate"?`${h.value.toFixed(2)}%`:`₹${h.value.toLocaleString()}`}`},y))]}):null;return e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Recharge Dashboard"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[e.jsxs("select",{className:"p-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:o,onChange:i=>T(i.target.value),"aria-label":"Select filter period",children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"Daily",children:"Daily"}),e.jsx("option",{value:"Weekly",children:"Weekly"}),e.jsx("option",{value:"Monthly",children:"Monthly"})]}),e.jsx("input",{type:"date",className:"p-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:d,onChange:i=>x(i.target.value),"aria-label":"Start date"}),e.jsx("input",{type:"date",className:"p-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:p,onChange:i=>b(i.target.value),"aria-label":"End date"}),e.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-indigo-300 transition-colors duration-200",onClick:L,disabled:!d||!p,"aria-label":"Apply date filter",children:[e.jsx(Ee,{className:"h-4 w-4 inline mr-1"})," Apply"]}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors duration-200",onClick:Pe,"aria-label":"Export data as CSV",children:"Export Data"})]})]}),g?e.jsx("div",{className:"text-center p-8 text-gray-500",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-indigo-100 text-indigo-600 rounded-md",children:e.jsx(tt,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${w<0?"text-white bg-red-500":"text-white bg-green-500"}`,children:[w<0?e.jsx(te,{className:"h-3 w-3 mr-1"}):e.jsx(ae,{className:"h-3 w-3 mr-1"}),w.toFixed(2),"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Total Recharges"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:["₹",E.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. yesterday (₹",k.toLocaleString(),")"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-100 text-green-600 rounded-md",children:e.jsx($e,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${w<0?"text-white bg-red-500":"text-white bg-green-500"}`,children:[w<0?e.jsx(te,{className:"h-3 w-3 mr-1"}):e.jsx(ae,{className:"h-3 w-3 mr-1"}),w.toFixed(2),"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:["₹",E.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. yesterday (₹",k.toLocaleString(),")"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 text-blue-600 rounded-md",children:e.jsx(ze,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${X<0?"text-white bg-red-500":"text-white bg-green-500"}`,children:[X<0?e.jsx(te,{className:"h-3 w-3 mr-1"}):e.jsx(ae,{className:"h-3 w-3 mr-1"}),X.toFixed(2),"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Total Commission"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:["₹",K.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. yesterday (₹",C.toLocaleString(),")"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 text-purple-600 rounded-md",children:e.jsx(Ne,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${W<0?"text-white bg-red-500":"text-white bg-green-500"}`,children:[W<0?e.jsx(te,{className:"h-3 w-3 mr-1"}):e.jsx(ae,{className:"h-3 w-3 mr-1"}),W.toFixed(2),"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Avg Ticket Size"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:["₹",z.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. yesterday (₹",B.toFixed(2),")"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-100 text-yellow-600 rounded-md",children:e.jsx(rt,{className:"h-6 w-6"})}),e.jsxs("span",{className:`text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center ${M<0?"text-white bg-red-500":"text-white bg-green-500"}`,children:[M<0?e.jsx(te,{className:"h-3 w-3 mr-1"}):e.jsx(ae,{className:"h-3 w-3 mr-1"}),M,"%"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-500",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:[A.toFixed(2),"%"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["vs. yesterday (",Y.toFixed(2),"%)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 overflow-hidden",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recharge Amount Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(fe,{data:ee,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(me,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(se,{dataKey:"date",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ne,{stroke:"#6b7280",tick:{fontSize:12},tickFormatter:i=>`₹${i.toLocaleString()}`}),e.jsx(ue,{content:e.jsx(le,{})}),e.jsx(he,{wrapperStyle:{fontSize:12}}),e.jsx(q,{type:"monotone",dataKey:"totalAmount",stroke:"#6366f1",strokeWidth:3,dot:{r:5,fill:"#6366f1",stroke:"#ff",strokeWidth:2},activeDot:{r:8},animationDuration:800,name:"Total Recharge Amount"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 overflow-hidden",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Commission Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(fe,{data:ee,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(me,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(se,{dataKey:"date",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ne,{stroke:"#6b7280",tick:{fontSize:12},tickFormatter:i=>`₹${i.toLocaleString()}`}),e.jsx(ue,{content:e.jsx(le,{})}),e.jsx(he,{wrapperStyle:{fontSize:12}}),e.jsx(q,{type:"monotone",dataKey:"totalCommission",stroke:"#3b82f6",strokeWidth:3,dot:{r:5,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:8},animationDuration:800,name:"Total Commission"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 overflow-hidden",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Success Rate by Day"}),e.jsx("div",{className:"h-64",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(Ne,{data:ee,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(me,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(se,{dataKey:"date",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ne,{stroke:"#6b7280",tick:{fontSize:12},domain:[0,100],tickFormatter:i=>`${i}%`}),e.jsx(ue,{content:e.jsx(le,{})}),e.jsx(he,{wrapperStyle:{fontSize:12}}),e.jsx(Je,{dataKey:"successRate",fill:"#10b981",radius:[6,6,0,0],barSize:30,animationDuration:800,name:"Success Rate (%)",children:ee.map((i,m)=>e.jsx(Qe,{fillOpacity:.8+m*.02},`cell-${m}`))})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 overflow-hidden",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Average Ticket Size"}),e.jsx("div",{className:"h-64",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(fe,{data:ee,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(me,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(se,{dataKey:"date",stroke:"#6b7280",tick:{fontSize:12}}),e.jsx(ne,{stroke:"#6b7280",tick:{fontSize:12},tickFormatter:i=>`₹${i.toLocaleString()}`}),e.jsx(ue,{content:e.jsx(le,{})}),e.jsx(he,{wrapperStyle:{fontSize:12}}),e.jsx(q,{type:"monotone",dataKey:"avgTicket",stroke:"#f59e0b",strokeWidth:3,dot:{r:5,fill:"#f59e0b",stroke:"#fff",strokeWidth:2},activeDot:{r:8},animationDuration:800,name:"Average Ticket Size"})]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Top Operators"}),e.jsxs("select",{className:"border border-gray-200 rounded-lg bg-white text-sm p-2 focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Sort top operators",children:[e.jsx("option",{value:"volume",children:"By Volume"}),e.jsx("option",{value:"revenue",selected:!0,children:"By Revenue"}),e.jsx("option",{value:"commission",children:"By Commission"})]})]}),e.jsx("div",{className:"space-y-4",children:t&&t.length>0?je.sort((i,m)=>m.total_amount-i.total_amount).map(i=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 mr-3",children:e.jsx("span",{className:"font-medium",children:i.operator_name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:i.operator_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Commission: ₹",i.total_commission.toLocaleString()," (",i.avg_commission_percentage.toFixed(2),"%)"]})]})]}),e.jsxs("p",{className:"font-bold text-gray-800",children:["₹",i.total_amount.toLocaleString()]})]},i.operator_name)):e.jsx("p",{className:"text-sm text-gray-500",children:"No operators available."})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Recent Transactions"}),e.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"View all transactions",children:"View All"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference ID"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone Number"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Operator"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission (%)"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission Amount"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?[...n].sort((i,m)=>new Date(m.created_at)-new Date(i.created_at)).map(i=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.referenceid}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.canumber}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.operator_name}),e.jsxs("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",parseFloat(i.amount).toFixed(2)]}),e.jsxs("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[parseFloat(i.our_commission).toFixed(2),"%"]}),e.jsxs("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",parseFloat(i.commission_amount).toFixed(2)]}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${i.status==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.status})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(i.created_at).toLocaleString()})]},i.referenceid)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-4 sm:px-6 py-4 text-center text-sm text-gray-500",children:"No transactions found for this period."})})})]})})]})]})]})};export{St as default};
