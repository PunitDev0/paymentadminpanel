import{c as H,r as o,j as e,S as K}from"./app-D4YFqyfd.js";import{g as _,v as q,w as O}from"./apis-GO1kkuKU.js";import{R as z}from"./rotate-ccw-B7Nwjbzr.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],J=H("FileText",Z),ee=()=>{const[t,M]=o.useState("ADMIN"),[i,v]=o.useState({admins:[],api_partners:[],registered_users:[],deactivated_users:[]}),[j,U]=o.useState([]),[p,A]=o.useState(""),[u,D]=o.useState(""),[h,R]=o.useState(""),[b,k]=o.useState(""),[V,w]=o.useState(!1),[C,S]=o.useState(null),[I,N]=o.useState(null),[n,E]=o.useState({user_type:"ADMIN",name:"",email:"",company:"",parent:"",shop_name:"",pancard_number:"",aadhaar_number:"",mobile:"",address:"",state:"",city:"",pincode:"",api_key:"",deactivation_reason:""});o.useEffect(()=>{(async()=>{try{const s=await _();v(s),g("ADMIN",s.admins,p,u,h,b)}catch(s){console.error("Error fetching data:",s),N("Failed to fetch members: "+s.message)}})()},[]);const f=a=>{M(a),E(l=>({...l,user_type:a}));let s;a==="ADMIN"?s=i.admins:a==="API_PARTNER"?s=i.api_partners:a==="REGISTERED_USER"?s=i.registered_users:a==="DEACTIVATED_USER"&&(s=i.deactivated_users),g(a,s,p,u,h,b)},g=(a,s,l,c,r,m)=>{let x=[...s];if(l&&(x=x.filter(y=>y.name.toLowerCase().includes(l.toLowerCase())||y.email.toLowerCase().includes(l.toLowerCase()))),c&&r){const y=new Date(c),T=new Date(r);T.setHours(23,59,59,999),x=x.filter(B=>{const P=new Date(B.created_at);return P>=y&&P<=T})}m&&(x=x.filter(y=>y.company===m)),U(x)},F=()=>{let a;t==="ADMIN"?a=i.admins:t==="API_PARTNER"?a=i.api_partners:t==="REGISTERED_USER"?a=i.registered_users:t==="DEACTIVATED_USER"&&(a=i.deactivated_users),g(t,a,p,u,h,b)},L=()=>{A(""),D(""),R(""),k("");let a;t==="ADMIN"?a=i.admins:t==="API_PARTNER"?a=i.api_partners:t==="REGISTERED_USER"?a=i.registered_users:t==="DEACTIVATED_USER"&&(a=i.deactivated_users),g(t,a,"","","","")},$=()=>{const a=[["#","Name","Parent Details","Company Profile","Wallet Details","Action"],...j.map((r,m)=>[m+1,`${r.name}
${r.email}
${r.created_at}`,r.parent||"N/A",r.company||"N/A",`Main Wallet: ₹${r.main_wallet||0}
Collection Wallet: ₹${r.collection_wallet||0}
OR Wallet: ₹${r.or_wallet||0}
RR Wallet: ₹${r.rr_wallet||0}
Locked Amt: ₹${r.locked_amount||0}`,""]),["#","Name","Parent Details","Company Profile","Wallet Details","Action"]].map(r=>r.join(",")).join(`
`),s=new Blob([a],{type:"text/csv"}),l=window.URL.createObjectURL(s),c=document.createElement("a");c.href=l,c.download=`member_details_${t.toLowerCase()}.csv`,c.click(),window.URL.revokeObjectURL(l)},G=async a=>{if(window.confirm("Are you sure you want to deactivate this member?"))try{await O(a,t);const s=await _();v(s);let l;t==="ADMIN"?l=s.admins:t==="API_PARTNER"?l=s.api_partners:t==="REGISTERED_USER"?l=s.registered_users:t==="DEACTIVATED_USER"&&(l=s.deactivated_users),g(t,l,p,u,h,b),alert("Member deactivated successfully.")}catch(s){N("Failed to deactivate member: "+s.message)}},d=a=>{const{name:s,value:l}=a.target;E(c=>({...c,[s]:l}))},W=async a=>{var s,l;a.preventDefault(),N(null),S(null);try{const c=await q(n),r=await _();v(r);let m;t==="ADMIN"?m=r.admins:t==="API_PARTNER"?m=r.api_partners:t==="REGISTERED_USER"?m=r.registered_users:t==="DEACTIVATED_USER"&&(m=r.deactivated_users),g(t,m,p,u,h,b),c.data.generated_password&&S(c.data.generated_password),E({user_type:t,name:"",email:"",company:"",parent:"",shop_name:"",pancard_number:"",aadhaar_number:"",mobile:"",address:"",state:"",city:"",pincode:"",api_key:"",deactivation_reason:""}),w(!1),alert("User added successfully.")}catch(c){N("Failed to add user: "+(((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message))}};return V?e.jsxs("div",{className:"p-6",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["Home - Create ",t.replace("_"," ")]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Member Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company"}),e.jsxs("select",{name:"company",value:n.company,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",children:[e.jsx("option",{value:"",children:"Select Company"}),e.jsx("option",{value:"Banking NIKAT-By",children:"Banking NIKAT-By"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Parent"}),e.jsx("input",{type:"text",name:"parent",value:n.parent,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value"})]})]}),e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Shop Name"}),e.jsx("input",{type:"text",name:"shop_name",value:n.shop_name,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pancard Number"}),e.jsx("input",{type:"text",name:"pancard_number",value:n.pancard_number,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Aadhaarcard Number"}),e.jsx("input",{type:"text",name:"aadhaar_number",value:n.aadhaar_number,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value"})]})]}),e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile"}),e.jsx("input",{type:"text",name:"mobile",value:n.mobile,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{type:"text",name:"address",value:n.address,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),e.jsx("input",{type:"text",name:"state",value:n.state,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("input",{type:"text",name:"city",value:n.city,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pincode"}),e.jsx("input",{type:"text",name:"pincode",value:n.pincode,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value"})]})]}),t==="API_PARTNER"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"API Information"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"API Key"}),e.jsx("input",{type:"text",name:"api_key",value:n.api_key,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Value"})]})})]}),t==="DEACTIVATED_USER"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Deactivation Information"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deactivation Reason"}),e.jsx("textarea",{name:"deactivation_reason",value:n.deactivation_reason,onChange:d,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"Enter Reason"})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-600 text-white rounded",children:"Cancel"}),e.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Submit"})]}),C&&e.jsxs("div",{className:"mt-4 p-4 bg-green-100 text-green-700 rounded",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Generated Password:"})," ",C]}),e.jsx("p",{children:"Please save this password securely. It will be needed for login."}),e.jsx("p",{children:"An email with the credentials has been sent to the user."})]}),I&&e.jsx("div",{className:"mt-4 p-4 bg-red-100 text-red-700 rounded",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Error:"})," ",I]})})]})]}):e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Home - Member Details"}),e.jsxs("div",{className:"bg-gray-200 p-2 rounded-t-lg",children:[e.jsx("button",{onClick:()=>f("ADMIN"),className:`px-4 py-2 mr-2 rounded-t-lg ${t==="ADMIN"?"bg-yellow-500 text-white":"bg-gray-300"}`,children:"Admin"}),e.jsx("button",{onClick:()=>f("API_PARTNER"),className:`px-4 py-2 mr-2 rounded-t-lg ${t==="API_PARTNER"?"bg-yellow-500 text-white":"bg-gray-300"}`,children:"API Partner"}),e.jsx("button",{onClick:()=>f("REGISTERED_USER"),className:`px-4 py-2 mr-2 rounded-t-lg ${t==="REGISTERED_USER"?"bg-yellow-500 text-white":"bg-gray-300"}`,children:"Registered User"}),e.jsx("button",{onClick:()=>f("DEACTIVATED_USER"),className:`px-4 py-2 rounded-t-lg ${t==="DEACTIVATED_USER"?"bg-yellow-500 text-white":"bg-gray-300"}`,children:"Deactivated User"})]}),e.jsx("div",{className:"bg-gray-200 p-4 rounded-b-lg",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"date",value:u,onChange:a=>D(a.target.value),className:"p-2 border rounded"}),e.jsx("input",{type:"date",value:h,onChange:a=>R(a.target.value),className:"p-2 border rounded"}),e.jsx("input",{type:"text",value:p,onChange:a=>A(a.target.value),placeholder:"Search Value",className:"p-2 border rounded"}),e.jsx("input",{type:"text",placeholder:"Agent ID / Parent ID",className:"p-2 border rounded"}),e.jsxs("select",{className:"p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"deactive",children:"Deactive"})]}),e.jsxs("select",{value:b,onChange:a=>k(a.target.value),className:"p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Company"}),e.jsx("option",{value:"Banking NIKAT-By",children:"Banking NIKAT-By"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:F,className:"p-2 bg-gray-600 text-white rounded",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("button",{onClick:L,className:"p-2 bg-red-600 text-white rounded",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:$,className:"p-2 bg-blue-600 text-white rounded",children:e.jsx(J,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:[t.replace("_"," ")," List"]}),e.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"+ Add New"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company Profile"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wallet Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length>0?j.map((a,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s+1}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[a.name,e.jsx("br",{}),a.email,e.jsx("br",{}),a.created_at]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.parent||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.company||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["Main Wallet: ₹",a.main_wallet||0,e.jsx("br",{}),"Collection Wallet: ₹",a.collection_wallet||0,e.jsx("br",{}),"OR Wallet: ₹",a.or_wallet||0,e.jsx("br",{}),"RR Wallet: ₹",a.rr_wallet||0,e.jsx("br",{}),"Locked Amt: ₹",a.locked_amount||0]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("select",{className:"border border-gray-300 rounded-md p-1",onChange:l=>{l.target.value!=="action"&&l.target.value==="delete"&&(t==="ADMIN"||t==="API_PARTNER"||t==="REGISTERED_USER")&&G(a.id)},children:[e.jsx("option",{value:"action",children:"Action"}),(t==="ADMIN"||t==="API_PARTNER"||t==="REGISTERED_USER")&&e.jsx("option",{value:"delete",children:"Deactivate"}),e.jsx("option",{value:"reports",children:"Reports"})]})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No Data Available in Table"})})})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",j.length," to 0 of ",j.length," entries"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded",children:"Previous"}),e.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white rounded",children:"1"}),e.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded",children:"Next"}),e.jsxs("select",{className:"p-1 border rounded",children:[e.jsx("option",{children:"Show 10"}),e.jsx("option",{children:"Show 25"}),e.jsx("option",{children:"Show 50"})]})]})]})]})]})};export{ee as default};
