import{c as C,r,E as R,F,j as e,X as o,G as I,H as $,I as T,J as V}from"./app-ou4hOunU.js";import{F as q}from"./file-text-BjdmpeFq.js";import{S as z}from"./search-DAwUcqV4.js";import{C as y}from"./check-BVotxUtM.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],A=C("Ban",M);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],H=C("Eye",U);function Y(){const[f,b]=r.useState([]),[x,N]=r.useState([]),[i,w]=r.useState("inactive"),[s,g]=r.useState(null),[m,S]=r.useState(""),[l,d]=r.useState({show:!1,bank:null,action:""}),[_,p]=r.useState(!1),[c,a]=r.useState(!1);r.useEffect(()=>{h(),u()},[]);const h=async()=>{a(!0);try{const t=await R();Array.isArray(t)?b(t):(b([]),console.warn("Fetched data is not an array:",t))}catch(t){console.error("Error fetching bank details:",t)}finally{a(!1)}},u=async()=>{a(!0);try{const t=await F();console.log("Pending Requests:",t),Array.isArray(t)?N(t):(N([]),console.warn("Fetched payment requests data is not an array:",t))}catch(t){console.error("Error fetching payment requests:",t)}finally{a(!1)}},D=async t=>{a(!0);try{await T(t),h(),g(null)}catch(n){console.error("Error activating bank:",n)}finally{a(!1)}},B=async t=>{a(!0);try{await V(t),h()}catch(n){console.error("Error deactivating bank:",n)}finally{a(!1)}},L=async t=>{a(!0);try{await I(t),u()}catch(n){console.error("Error approving request:",n)}finally{a(!1)}},E=async t=>{a(!0);try{await $(t),u()}catch(n){console.error("Error disapproving request:",n)}finally{a(!1)}},j=Array.isArray(f)?f.filter(t=>{var v,k;const n=((v=t.bank)==null?void 0:v.toLowerCase().includes(m.toLowerCase()))||((k=t.ifsc_code)==null?void 0:k.toLowerCase().includes(m.toLowerCase()));return i==="inactive"?t.status===0&&n:t.status===1&&n}):[],P=()=>{l.action==="activate"?D(l.bank.id):l.action==="deactivate"&&B(l.bank.id),d({show:!1,bank:null,action:""})};return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Bank Dashboard"}),e.jsxs("button",{onClick:()=>p(!0),className:"relative bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200","aria-label":"View pending payment requests",children:[e.jsx(q,{className:"h-4 w-4 inline mr-1"})," Pending Requests",x.length>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full px-2 py-1 text-xs",children:x.length})]})]}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("button",{onClick:()=>w("inactive"),className:`px-4 py-2 rounded-lg text-sm font-medium ${i==="inactive"?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:bg-gray-50"} transition-colors duration-200`,"aria-label":"View inactive banks",children:"Inactive Banks"}),e.jsx("button",{onClick:()=>w("active"),className:`px-4 py-2 rounded-lg text-sm font-medium ${i==="active"?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:bg-gray-50"} transition-colors duration-200`,"aria-label":"View active banks",children:"Active Banks"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by Bank Name or IFSC",value:m,onChange:t=>S(t.target.value),className:"pl-10 p-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 w-full","aria-label":"Search banks"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:i==="inactive"?"Inactive Banks":"Active Banks"}),c?e.jsx("div",{className:"text-center text-gray-500",children:"Loading..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Bank Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Account Holder"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Account Number"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"IFSC Code"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"User"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Created At"}),i==="active"&&e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Activated On"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length>0?j.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.bank||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.account_name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.account_number||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.ifsc_code||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.username||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.created_at?new Date(t.created_at).toLocaleDateString():"N/A"}),i==="active"&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.updated_at?new Date(t.updated_at).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i==="inactive"?e.jsxs("button",{className:"bg-indigo-600 text-white px-3 py-1 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-indigo-300 transition-colors duration-200",onClick:()=>g(t),disabled:c,"aria-label":`View details for ${t.bank}`,children:[e.jsx(H,{className:"h-4 w-4 inline mr-1"})," View Details"]}):e.jsxs("button",{className:"bg-red-600 text-white px-3 py-1 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-red-300 transition-colors duration-200",onClick:()=>d({show:!0,bank:t,action:"deactivate"}),disabled:c,"aria-label":`Deactivate ${t.bank}`,children:[e.jsx(A,{className:"h-4 w-4 inline mr-1"})," Deactivate"]})})]},t.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:i==="active"?8:7,className:"px-6 py-4 text-center text-sm text-gray-500",children:["No ",i," banks found."]})})})]})})]}),_&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Pending Payment Requests"}),e.jsx("button",{onClick:()=>p(!1),className:"p-2 bg-gray-200 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":"Close pending requests modal",children:e.jsx(o,{className:"h-4 w-4 text-gray-600"})})]}),c?e.jsx("div",{className:"text-center text-gray-500",children:"Loading..."}):e.jsx("div",{className:"overflow-x-auto max-h-[60vh]",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Deposited Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Bank"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"User"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Image"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length>0?x.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.transaction_type||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",parseFloat(t.amount||0).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.transaction_id||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.deposited_date?new Date(t.deposited_date).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.bank?t.bank.bank:"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.user?t.user.name:"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.file_path?e.jsx("a",{href:t.file_path,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800","aria-label":`View image for request ${t.transaction_id}`,children:"View"}):"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.status||"Pending"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsxs("button",{className:"bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-green-300 transition-colors duration-200 mr-2",onClick:()=>L(t.id),disabled:c,"aria-label":`Approve request ${t.transaction_id}`,children:[e.jsx(y,{className:"h-4 w-4 inline mr-1"})," Approve"]}),e.jsxs("button",{className:"bg-red-600 text-white px-3 py-1 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-red-300 transition-colors duration-200",onClick:()=>E(t.id),disabled:c,"aria-label":`Disapprove request ${t.transaction_id}`,children:[e.jsx(A,{className:"h-4 w-4 inline mr-1"})," Disapprove"]})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No pending payment requests found."})})})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200",onClick:()=>p(!1),"aria-label":"Close pending requests modal",children:[e.jsx(o,{className:"h-4 w-4 inline mr-1"})," Close"]})})]})}),s&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Bank Details"}),e.jsx("button",{onClick:()=>g(null),className:"p-2 bg-gray-200 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":"Close bank details modal",children:e.jsx(o,{className:"h-4 w-4 text-gray-600"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-900",children:[e.jsx("strong",{children:"Bank Name:"})," ",s.bank||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-900",children:[e.jsx("strong",{children:"Account Name:"})," ",s.account_name||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-900",children:[e.jsx("strong",{children:"Account Number:"})," ",s.account_number||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-900",children:[e.jsx("strong",{children:"IFSC Code:"})," ",s.ifsc_code||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-900",children:[e.jsx("strong",{children:"Username:"})," ",s.username||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-900",children:[e.jsx("strong",{children:"Created At:"})," ",s.created_at?new Date(s.created_at).toLocaleDateString():"N/A"]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsxs("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-indigo-300 transition-colors duration-200",onClick:()=>d({show:!0,bank:s,action:"activate"}),disabled:c,"aria-label":`Activate ${s.bank}`,children:[e.jsx(y,{className:"h-4 w-4 inline mr-1"})," Activate"]}),e.jsxs("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200",onClick:()=>g(null),"aria-label":"Cancel",children:[e.jsx(o,{className:"h-4 w-4 inline mr-1"})," Cancel"]})]})]})}),l.show&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Confirm Action"}),e.jsx("button",{onClick:()=>d({show:!1,bank:null,action:""}),className:"p-2 bg-gray-200 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":"Close confirmation dialog",children:e.jsx(o,{className:"h-4 w-4 text-gray-600"})})]}),e.jsxs("p",{className:"text-sm text-gray-900",children:["Are you sure you want to"," ",e.jsx("span",{className:"font-bold",children:l.action==="activate"?"activate":"deactivate"})," ","the bank ",e.jsx("span",{className:"font-bold",children:l.bank.bank}),"?"]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsxs("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-indigo-300 transition-colors duration-200",onClick:P,disabled:c,"aria-label":"Confirm action",children:[e.jsx(y,{className:"h-4 w-4 inline mr-1"})," Yes"]}),e.jsxs("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200",onClick:()=>d({show:!1,bank:null,action:""}),"aria-label":"Cancel",children:[e.jsx(o,{className:"h-4 w-4 inline mr-1"})," Cancel"]})]})]})})]})})}export{Y as default};
